// "use client";

import { AnimatePresence, motion } from 'framer-motion';

//framer-motion
const xIconVars = {
  initial:{
    opacity: 0.8,
    scale: 0.5,
    rotate:0,
  },
  visible:{
    opacity: 1,
    scale: 1,
    rotate: 360,
    transition: {
      type: "spring",
      stiffness: 300,
      damping: 15,
      duration: 1.5,
    }
  },
  leaving:{
    opacity: 0,
    scale: 0.2,
    transition: {
      duration: 0.3,
      ease: "easeInOut"
    }
  }
};
const searchIconVars = {
  initial:{
    opacity: 0.7,
    scale: 1.2,
  },
  visible:{
    opacity: 1,
    scale: 1,
    transition: {
      type: "spring",
      stiffness: 300,
      damping: 15,
      duration: 1.5,
      ease: "easeInOut"
    }
  },
  leaving:{
    opacity: 0,
    scale: 0.2,
    transition: {
      duration: 0.3,
      ease: "easeInOut"
    }
  }
};

interface SearchBtnProps {
  isOpen: boolean;
  setIsOpen: React.Dispatch<React.SetStateAction<boolean>>;
}

export default function SearchBtn({isOpen, setIsOpen} : SearchBtnProps){
  return(
    <button onClick={()=>setIsOpen((prev)=>!prev)} 
    className="flex items-center justify-center w-12 h-12 
    mode-secondary-50 rounded-full backdrop-blur-lg media-bar-w-sm">
      <AnimatePresence mode="wait" initial={false}>
      {isOpen ? (
        <motion.svg key="playing" variants={xIconVars}
        initial="initial" animate="visible" exit="leaving"
        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" className="pointer-none w-11 h-11 mode-svg-color media-bar-w-sm">
          <path d="M55.918,18.911c-.48-.482-1.123-.772-1.802-.819-.091-.006-.172-.01-.234-.01-.234,0-.469.011-.702.033-.35.034-.698.092-1.042.176-.229.056-.455.123-.679.201-.335.117-.664.26-.983.427-.638.335-1.237.771-1.773,1.307-.375.375-.666.749-.923,1.123-2.621,3.814.357,7.502-1.829,9.687l-.639.639c-3.115,3.115-8.211,3.115-11.326,0l-.639-.639c-2.186-2.186-1.829-9.687-1.829-9.687,0,0-3.724-.761-6.907-1.155l.597-8.195c-6.152,0-13.21,6.176-13.21,13.21l8.194-.597c.393,3.183,1.153,6.908,1.153,6.908,0,0,7.718-.143,9.69,1.829.121.121.517.519.639.639,3.289,3.226,2.895,8.536,0,11.326-.123.119-.518.518-.639.639-1.972,1.972-5.84-.835-9.69,1.829-.374.259-.748.551-1.12.923-.536.536-.972,1.135-1.307,1.773-.168.319-.31.648-.427.983-.078.224-.145.45-.201.679-.084.343-.142.692-.176,1.042-.022.233-.033.468-.033.702,0,.053.002.12.006.195.035.691.329,1.346.818,1.835l.005.005-6.911.966,10.417,10.417.966-6.911.005.005c.493.493,1.153.788,1.849.819.069.003.131.005.181.005.234,0,.469-.011.702-.033.35-.034.698-.092,1.042-.176.229-.056.455-.123.679-.201.335-.117.664-.26.983-.427.638-.335,1.237-.771,1.773-1.307.375-.375.666-.749.923-1.123,2.621-3.814-.357-7.502,1.829-9.687.121-.121.517-.518.639-.639,3.262-3.226,8.541-2.958,11.326,0,.117.125.518.518.639.639,2.186,2.186,1.829,9.687,1.829,9.687,0,0,3.724.761,6.907,1.155l1.498,8.894c1.308-5.811,6.132-10.609,11.814-11.814l-8.893-1.497c-.393-3.183-1.153-6.908-1.153-6.908,0,0-7.718.143-9.69-1.829-.121-.121-.52-.515-.639-.639-3.221-3.357-2.953-8.494,0-11.326.124-.118.518-.518.639-.639,1.972-1.972,5.84.835,9.69-1.829.374-.259.748-.551,1.12-.923.536-.536.972-1.135,1.307-1.773.168-.319.31-.648.427-.983.078-.224.145-.45.201-.679.084-.343.142-.692.176-1.042.022-.233.033-.468.033-.702,0-.055-.003-.125-.007-.204-.038-.688-.331-1.34-.818-1.827l-.004-.004,6.911-.966-10.417-10.417-.966,6.911h0ZM40.334,43.918c-2.915.447-5.39-2.028-4.944-4.943.278-1.816,1.763-3.301,3.579-3.579,2.915-.446,5.39,2.028,4.943,4.943-.278,1.817-1.763,3.301-3.579,3.58Z"/>
        </motion.svg>
      ) : (
        <motion.svg key="paused" variants={searchIconVars}
        initial="initial" animate="visible" exit="leaving"
        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" className="pointer-none w-11 h-11 mode-svg-color media-bar-w-sm">
          <path d="M20.289,20.264s-.003.003-.005.004c0,0-.002.002-.003.003-.002.002-.004.003-.005.005-.002.002-.004.004-.005.005,0,0-.002.002-.003.003-.002.002-.003.003-.004.005-7.417,7.43-7.413,19.467.012,26.892h0c6.044,6.044,15.144,7.171,22.327,3.38,1.681-.887,2.953-2.219,4.297-.874,2.606,2.606-1.745,7.964,3.316,13.024.646.646,1.367,1.171,2.136,1.575.384.202.78.374,1.184.515.269.094.543.175.818.242.414.101.833.172,1.255.212.281.027.564.04.846.04.423,0,.847-.03,1.267-.091.28-.04.558-.094.834-.162,1.517-.37,2.954-1.147,4.139-2.332.003-.003.005-.005.008-.008.003-.003.005-.005.008-.008,1.185-1.185,1.962-2.622,2.332-4.138.067-.276.121-.554.162-.834.061-.42.091-.843.091-1.267,0-.282-.014-.565-.04-.846-.04-.422-.111-.841-.212-1.255-.067-.276-.148-.549-.242-.818-.141-.404-.313-.8-.515-1.184-.404-.768-.929-1.49-1.575-2.136-5.061-5.061-10.133-.424-13.024-3.316-1.344-1.344-.013-2.616.874-4.297,3.791-7.184,2.665-16.283-3.38-22.327h0c-7.425-7.425-19.461-7.429-26.892-.012ZM42.935,24.523c5.084,5.084,5.085,13.328,0,18.412h0c-5.084,5.084-13.328,5.084-18.412,0h0c-5.084-5.084-5.084-13.328,0-18.412h0c5.084-5.085,13.328-5.085,18.412,0h0Z"/>
      </motion.svg>
      )}
      </AnimatePresence>
    </button>
  )
}